!function(){"use strict";class e extends HTMLElement{constructor(){super();const e=this;e.drag={isDragging:!1,startY:0,currentY:0,endY:0,delta:0},e.threshold=100,e.panel=e.querySelector(":scope > bottom-sheet-panel"),e.panelContent=e.panel.querySelector(":scope > bottom-sheet-content"),e.overlay=e.querySelector("bottom-sheet-overlay"),e.header=e.querySelector("bottom-sheet-header"),e.setupAriaAttributes(),e.bindUI()}setupAriaAttributes(){const e=this;e.setAttribute("role","dialog"),e.setAttribute("aria-hidden","true"),e.setAttribute("aria-modal","true"),e.hasAttribute("aria-label")||e.setAttribute("aria-label","Bottom sheet content")}bindUI(){const e=this;e.header&&(e.header.addEventListener("touchstart",(t=>e.panelDragStart(t)),!0),e.header.addEventListener("touchmove",(t=>e.panelDragMove(t)),!1),e.header.addEventListener("touchend",(t=>e.panelDragEnd(t))),e.header.addEventListener("touchcancel",(t=>e.panelDragEnd(t)))),e.panelContent&&(e.panelContent.addEventListener("touchstart",(t=>e.panelDragStart(t)),!0),e.panelContent.addEventListener("touchmove",(t=>e.panelDragMove(t)),!1),e.panelContent.addEventListener("touchend",(t=>e.panelDragEnd(t))),e.panelContent.addEventListener("touchcancel",(t=>e.panelDragEnd(t)))),e.overlay&&(e.overlay.addEventListener("touchstart",(t=>e.panelDragStart(t)),!0),e.overlay.addEventListener("touchmove",(t=>e.panelDragMove(t)),!1),e.overlay.addEventListener("touchend",(t=>e.panelDragEnd(t))),e.overlay.addEventListener("touchcancel",(t=>e.panelDragEnd(t))),e.overlay.addEventListener("click",(()=>e.hide()))),e.panel&&e.panel.addEventListener("transitionend",(t=>e.handleTransitionEnd(t)))}toggleBodyScroll(e){const t=this;e?(t.scrollPosition=window.pageYOffset,document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${t.scrollPosition}px`,document.body.style.width="100%"):(document.body.style.removeProperty("overflow"),document.body.style.removeProperty("position"),document.body.style.removeProperty("top"),document.body.style.removeProperty("width"),window.scrollTo(0,t.scrollPosition),t.scrollPosition=0)}panelDragStart(e){const t=this,n=t.drag;n.startY=e.targetTouches[0].screenY,n.direction=!1,n.delta=0,t.panel.classList.remove("transitioning"),(0===t.panelContent.scrollTop||e.target.closest("bottom-sheet-header")||e.target.closest("bottom-sheet-overlay"))&&(n.isDragging=!0)}panelDragMove(e){const t=this,n=t.drag;if(n.isDragging){if(n.currentY=e.targetTouches[0].screenY,n.delta=n.currentY-n.startY,!n.direction){if(n.delta<0)return void(n.isDragging=!1);n.direction=!0}n.delta<0?t.panel.style.transform="translate3d(0,0,0)":(n.delta>0&&(e.cancelable&&e.preventDefault(),e.stopPropagation()),t.panel.style.transform=`translate3d(0,${n.delta}px,0)`)}}panelDragEnd(e){const t=this,n=t.drag;if(n.isDragging){if(n.isDragging=!1,n.delta>t.threshold)return n.delta=0,void t.hide();n.delta=0,t.show()}}handleTransitionEnd(e){"transform"===e.propertyName&&this.panel.classList.remove("transitioning")}show(){const e=this;e.setAttribute("aria-hidden","false"),e.panel.classList.add("transitioning"),e.panel.style.transform=null,e.toggleBodyScroll(!0)}hide(){const e=this;e.setAttribute("aria-hidden","true"),e.panel.classList.add("transitioning"),e.panel.style.transform=null,e.toggleBodyScroll(!1)}}class t extends HTMLElement{constructor(){super()}}class n extends HTMLElement{constructor(){super()}}class o extends HTMLElement{constructor(){super()}}class r extends HTMLElement{constructor(){super()}}customElements.define("bottom-sheet",e),customElements.define("bottom-sheet-panel",t),customElements.define("bottom-sheet-content",n),customElements.define("bottom-sheet-overlay",o),customElements.define("bottom-sheet-header",r)}();
