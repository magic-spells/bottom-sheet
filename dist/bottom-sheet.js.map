{"version":3,"file":"bottom-sheet.js","sources":["../src/bottom-sheet.js"],"sourcesContent":["import './bottom-sheet.css';\n\n/**\n * A throttle utility function to limit how often a function can be called\n * @param {Function} func - The function to throttle\n * @param {number} limit - The time limit in ms for the throttling\n * @returns {Function} A throttled function\n */\nconst throttle = (func, limit) => {\n  let inThrottle;\n  return function (...args) {\n    if (!inThrottle) {\n      func.apply(this, args);\n      inThrottle = true;\n      setTimeout(() => (inThrottle = false), limit);\n    }\n  };\n};\n\n/**\n * BottomSheet class that manages touch gestures and delegates\n * show/hide to a parent <dialog-panel> element.\n *\n * Expected HTML structure:\n * <dialog-panel>\n *   <dialog>\n *     <bottom-sheet>\n *       <bottom-sheet-header>...</bottom-sheet-header>\n *       <bottom-sheet-content>...</bottom-sheet-content>\n *     </bottom-sheet>\n *   </dialog>\n * </dialog-panel>\n */\nclass BottomSheet extends HTMLElement {\n  #handlers = {};\n\n  // physics constants\n  #overscrollResistance = 0.1;\n  #dragThreshold = 100;\n\n  // private backing fields\n  #maxDisplayWidth = Infinity;\n\n  // cached references for reliable cleanup in disconnectedCallback\n  #panelRef = null;\n  #dialogRef = null;\n  #backdropBound = false;\n\n  /**\n   * Define which attributes should be observed for changes\n   * @returns {string[]} List of attribute names to observe\n   */\n  static get observedAttributes() {\n    return ['max-display-width'];\n  }\n\n  /**\n   * Called when observed attributes change\n   * @param {string} name - The name of the attribute that changed\n   * @param {string} oldValue - The previous value of the attribute\n   * @param {string} newValue - The new value of the attribute\n   */\n  attributeChangedCallback(name, oldValue, newValue) {\n    const _ = this;\n    if (oldValue === newValue) return;\n\n    if (name === 'max-display-width') {\n      if (newValue === null || newValue === 'none') {\n        _.maxDisplayWidth = Infinity;\n      } else {\n        const parsed = parseInt(newValue);\n        _.maxDisplayWidth = !isNaN(parsed) ? parsed : Infinity;\n      }\n    }\n  }\n\n  /**\n   * Get the maximum display width\n   * @returns {number} The maximum width in pixels where the bottom sheet is shown\n   */\n  get maxDisplayWidth() {\n    return this.#maxDisplayWidth;\n  }\n\n  /**\n   * Set the maximum display width and reflect to attribute\n   * @param {number} value - The maximum width in pixels where the bottom sheet is shown\n   */\n  set maxDisplayWidth(value) {\n    const _ = this;\n    _.#maxDisplayWidth = value;\n\n    if (value === Infinity) {\n      _.removeAttribute('max-display-width');\n    } else {\n      _.setAttribute('max-display-width', value);\n    }\n  }\n\n  /**\n   * Find parent dialog-panel element\n   * @returns {HTMLElement|null}\n   */\n  get panel() {\n    return this.closest('dialog-panel');\n  }\n\n  /**\n   * Get the dialog element\n   * @returns {HTMLDialogElement|null}\n   */\n  get dialog() {\n    return this.closest('dialog');\n  }\n\n  /**\n   * Get the header element\n   * @returns {HTMLElement|null}\n   */\n  get header() {\n    return this.querySelector('bottom-sheet-header');\n  }\n\n  /**\n   * Get the content element\n   * @returns {HTMLElement|null}\n   */\n  get content() {\n    return this.querySelector('bottom-sheet-content');\n  }\n\n  /**\n   * Get the backdrop element from dialog-panel\n   * @returns {HTMLElement|null}\n   */\n  get backdrop() {\n    return this.panel?.querySelector('dialog-backdrop');\n  }\n\n  constructor() {\n    super();\n    const _ = this;\n\n    _.drag = {\n      isDragging: false,\n      startY: 0,\n      currentY: 0,\n      delta: 0,\n      direction: null,\n      isHeader: false,\n      isBackdrop: false,\n      isAtTop: false,\n    };\n\n    _.#handlers = {\n      touchStart: _.panelDragStart.bind(_),\n      touchMove: _.panelDragMove.bind(_),\n      touchEnd: _.panelDragEnd.bind(_),\n      transitionEnd: _.handleTransitionEnd.bind(_),\n      windowResize: throttle(() => {\n        if (window.innerWidth > _.maxDisplayWidth && _.panel?.isOpen) {\n          _.hide();\n        }\n      }, 100),\n      // Lazily bind backdrop touch events on first show (backdrop may not exist at connectedCallback)\n      // Also add transitioning class so the open slide-up animates\n      beforeShow: () => {\n        const backdrop = _.backdrop;\n        if (backdrop && !_.#backdropBound) {\n          _.#bindTouchEvents(backdrop);\n          _.#backdropBound = true;\n        }\n        _.dialog?.classList.add('transitioning');\n      },\n    };\n  }\n\n  /**\n   * Shows the bottom sheet via dialog-panel\n   * @param {HTMLElement} [triggerEl] - The element that triggered the show\n   */\n  show(triggerEl) {\n    const _ = this;\n    if (window.innerWidth > _.maxDisplayWidth) return;\n    _.panel?.show(triggerEl);\n  }\n\n  /**\n   * Hides the bottom sheet via dialog-panel\n   */\n  hide() {\n    // Clear any inline transform from drag gestures so CSS state transitions work\n    if (this.dialog) {\n      this.dialog.style.transform = '';\n    }\n    this.panel?.hide();\n  }\n\n  /**\n   * Binds touch event listeners\n   */\n  #bindTouchEvents(el) {\n    const _ = this;\n    if (!el) return;\n    el.addEventListener('touchstart', _.#handlers.touchStart, true);\n    el.addEventListener('touchmove', _.#handlers.touchMove, false);\n    el.addEventListener('touchend', _.#handlers.touchEnd);\n    el.addEventListener('touchcancel', _.#handlers.touchEnd);\n  }\n\n  /**\n   * Unbinds touch event listeners\n   */\n  #unbindTouchEvents(el) {\n    const _ = this;\n    if (!el) return;\n    el.removeEventListener('touchstart', _.#handlers.touchStart, true);\n    el.removeEventListener('touchmove', _.#handlers.touchMove, false);\n    el.removeEventListener('touchend', _.#handlers.touchEnd);\n    el.removeEventListener('touchcancel', _.#handlers.touchEnd);\n  }\n\n  connectedCallback() {\n    const _ = this;\n\n    // Cache references so disconnectedCallback can reliably unbind\n    _.#panelRef = _.panel;\n    _.#dialogRef = _.dialog;\n\n    window.addEventListener('resize', _.#handlers.windowResize);\n\n    _.#bindTouchEvents(_.header);\n    _.#bindTouchEvents(_.content);\n\n    // Backdrop may not exist yet (dialog-panel auto-creates it),\n    // so bind touch events lazily on first show\n    _.#backdropBound = false;\n    _.#panelRef?.addEventListener('beforeShow', _.#handlers.beforeShow);\n\n    if (_.#dialogRef) {\n      _.#dialogRef.addEventListener('transitionend', _.#handlers.transitionEnd);\n    }\n  }\n\n  disconnectedCallback() {\n    const _ = this;\n\n    window.removeEventListener('resize', _.#handlers.windowResize);\n\n    _.#unbindTouchEvents(_.header);\n    _.#unbindTouchEvents(_.content);\n\n    if (_.#backdropBound) {\n      _.#unbindTouchEvents(_.#panelRef?.querySelector('dialog-backdrop'));\n      _.#backdropBound = false;\n    }\n\n    _.#panelRef?.removeEventListener('beforeShow', _.#handlers.beforeShow);\n\n    if (_.#dialogRef) {\n      _.#dialogRef.removeEventListener('transitionend', _.#handlers.transitionEnd);\n    }\n\n    _.#panelRef = null;\n    _.#dialogRef = null;\n  }\n\n  /**\n   * Fired when a touch event starts on the panel\n   * @param {TouchEvent} e - The touch event\n   */\n  panelDragStart(e) {\n    const _ = this;\n    const drag = _.drag;\n\n    drag.startY = e.targetTouches[0].screenY;\n    drag.direction = null;\n    drag.delta = 0;\n\n    _.dialog?.classList.remove('transitioning');\n\n    const isHeader = !!e.target.closest('bottom-sheet-header');\n    const isBackdrop = !!e.target.closest('dialog-backdrop');\n    const isAtTop = _.content?.scrollTop === 0;\n\n    drag.isHeader = isHeader;\n    drag.isBackdrop = isBackdrop;\n    drag.isAtTop = isAtTop;\n\n    if (isHeader || isBackdrop || isAtTop) {\n      drag.isDragging = true;\n    }\n  }\n\n  /**\n   * Applies resistance to a drag value to create a rubber-band effect\n   * @param {number} value - The raw drag distance\n   * @returns {number} The drag with resistance applied\n   */\n  #applyResistance(value) {\n    return Math.sqrt(value) * 10 * this.#overscrollResistance;\n  }\n\n  /**\n   * Fired when a touch event moves on the panel\n   * @param {TouchEvent} e - The touch event\n   */\n  panelDragMove(e) {\n    const _ = this;\n    const drag = _.drag;\n\n    if (!drag.isDragging) return;\n\n    drag.currentY = e.targetTouches[0].screenY;\n    drag.delta = drag.currentY - drag.startY;\n\n    if (!drag.direction) {\n      drag.direction = drag.delta < 0 ? 'up' : 'down';\n    }\n\n    // Content area: allow normal scrolling unless at top and dragging down\n    if (!drag.isHeader && !drag.isBackdrop) {\n      if (!drag.isAtTop) return;\n      if (drag.direction === 'up') return;\n    }\n\n    if (e.cancelable) e.preventDefault();\n    e.stopPropagation();\n\n    const dialog = _.dialog;\n    if (!dialog) return;\n\n    // Upward movement: apply strong resistance (rubber-band effect)\n    if (drag.delta < 0) {\n      const resistedDelta = _.#applyResistance(Math.abs(drag.delta));\n      dialog.style.transform = `translate3d(0,${-resistedDelta}px,0)`;\n      return;\n    }\n\n    // Downward movement: natural movement for dismissal\n    if (drag.delta > 0) {\n      dialog.style.transform = `translate3d(0,${drag.delta}px,0)`;\n    }\n  }\n\n  /**\n   * Fired when a touch event ends on the panel\n   */\n  panelDragEnd() {\n    const _ = this;\n    const drag = _.drag;\n\n    if (!drag.isDragging) return;\n    drag.isDragging = false;\n\n    const dialog = _.dialog;\n    if (!dialog) return;\n\n    // No movement â€” nothing to animate\n    if (drag.delta === 0) {\n      drag.direction = null;\n      return;\n    }\n\n    dialog.classList.add('transitioning');\n\n    // Upward drag: always snap back\n    if (drag.delta < 0) {\n      drag.delta = 0;\n      drag.direction = null;\n      dialog.style.transform = '';\n      return;\n    }\n\n    // Downward drag past threshold: dismiss\n    if (drag.delta > _.#dragThreshold) {\n      drag.delta = 0;\n      drag.direction = null;\n      _.hide();\n      return;\n    }\n\n    // Snap back to open position\n    drag.delta = 0;\n    drag.direction = null;\n    dialog.style.transform = '';\n  }\n\n  /**\n   * Runs when a CSS transition finishes\n   * @param {TransitionEvent} e - The transition event\n   */\n  handleTransitionEnd(e) {\n    if (e.target === this.dialog && e.propertyName === 'transform') {\n      this.dialog.classList.remove('transitioning');\n    }\n  }\n}\n\nclass BottomSheetContent extends HTMLElement {\n  constructor() {\n    super();\n  }\n}\n\nclass BottomSheetHeader extends HTMLElement {\n  constructor() {\n    super();\n  }\n}\n\nif (!customElements.get('bottom-sheet')) {\n  customElements.define('bottom-sheet', BottomSheet);\n}\nif (!customElements.get('bottom-sheet-content')) {\n  customElements.define('bottom-sheet-content', BottomSheetContent);\n}\nif (!customElements.get('bottom-sheet-header')) {\n  customElements.define('bottom-sheet-header', BottomSheetHeader);\n}\n\nexport { BottomSheet, BottomSheetContent, BottomSheetHeader };\n"],"names":[],"mappings":";;;;;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA,MAAM,QAAQ,GAAG,CAAC,IAAI,EAAE,KAAK,KAAK;EAClC,EAAE,IAAI,UAAU,CAAC;EACjB,EAAE,OAAO,UAAU,GAAG,IAAI,EAAE;EAC5B,IAAI,IAAI,CAAC,UAAU,EAAE;EACrB,MAAM,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;EAC7B,MAAM,UAAU,GAAG,IAAI,CAAC;EACxB,MAAM,UAAU,CAAC,OAAO,UAAU,GAAG,KAAK,CAAC,EAAE,KAAK,CAAC,CAAC;EACpD,KAAK;EACL,GAAG,CAAC;EACJ,CAAC,CAAC;AACF;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,MAAM,WAAW,SAAS,WAAW,CAAC;EACtC,EAAE,SAAS,GAAG,EAAE,CAAC;AACjB;EACA;EACA,EAAE,qBAAqB,GAAG,GAAG,CAAC;EAC9B,EAAE,cAAc,GAAG,GAAG,CAAC;AACvB;EACA;EACA,EAAE,gBAAgB,GAAG,QAAQ,CAAC;AAC9B;EACA;EACA,EAAE,SAAS,GAAG,IAAI,CAAC;EACnB,EAAE,UAAU,GAAG,IAAI,CAAC;EACpB,EAAE,cAAc,GAAG,KAAK,CAAC;AACzB;EACA;EACA;EACA;EACA;EACA,EAAE,WAAW,kBAAkB,GAAG;EAClC,IAAI,OAAO,CAAC,mBAAmB,CAAC,CAAC;EACjC,GAAG;AACH;EACA;EACA;EACA;EACA;EACA;EACA;EACA,EAAE,wBAAwB,CAAC,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE;EACrD,IAAI,MAAM,CAAC,GAAG,IAAI,CAAC;EACnB,IAAI,IAAI,QAAQ,KAAK,QAAQ,EAAE,OAAO;AACtC;EACA,IAAI,IAAI,IAAI,KAAK,mBAAmB,EAAE;EACtC,MAAM,IAAI,QAAQ,KAAK,IAAI,IAAI,QAAQ,KAAK,MAAM,EAAE;EACpD,QAAQ,CAAC,CAAC,eAAe,GAAG,QAAQ,CAAC;EACrC,OAAO,MAAM;EACb,QAAQ,MAAM,MAAM,GAAG,QAAQ,CAAC,QAAQ,CAAC,CAAC;EAC1C,QAAQ,CAAC,CAAC,eAAe,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,MAAM,GAAG,QAAQ,CAAC;EAC/D,OAAO;EACP,KAAK;EACL,GAAG;AACH;EACA;EACA;EACA;EACA;EACA,EAAE,IAAI,eAAe,GAAG;EACxB,IAAI,OAAO,IAAI,CAAC,gBAAgB,CAAC;EACjC,GAAG;AACH;EACA;EACA;EACA;EACA;EACA,EAAE,IAAI,eAAe,CAAC,KAAK,EAAE;EAC7B,IAAI,MAAM,CAAC,GAAG,IAAI,CAAC;EACnB,IAAI,CAAC,CAAC,gBAAgB,GAAG,KAAK,CAAC;AAC/B;EACA,IAAI,IAAI,KAAK,KAAK,QAAQ,EAAE;EAC5B,MAAM,CAAC,CAAC,eAAe,CAAC,mBAAmB,CAAC,CAAC;EAC7C,KAAK,MAAM;EACX,MAAM,CAAC,CAAC,YAAY,CAAC,mBAAmB,EAAE,KAAK,CAAC,CAAC;EACjD,KAAK;EACL,GAAG;AACH;EACA;EACA;EACA;EACA;EACA,EAAE,IAAI,KAAK,GAAG;EACd,IAAI,OAAO,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;EACxC,GAAG;AACH;EACA;EACA;EACA;EACA;EACA,EAAE,IAAI,MAAM,GAAG;EACf,IAAI,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;EAClC,GAAG;AACH;EACA;EACA;EACA;EACA;EACA,EAAE,IAAI,MAAM,GAAG;EACf,IAAI,OAAO,IAAI,CAAC,aAAa,CAAC,qBAAqB,CAAC,CAAC;EACrD,GAAG;AACH;EACA;EACA;EACA;EACA;EACA,EAAE,IAAI,OAAO,GAAG;EAChB,IAAI,OAAO,IAAI,CAAC,aAAa,CAAC,sBAAsB,CAAC,CAAC;EACtD,GAAG;AACH;EACA;EACA;EACA;EACA;EACA,EAAE,IAAI,QAAQ,GAAG;EACjB,IAAI,OAAO,IAAI,CAAC,KAAK,EAAE,aAAa,CAAC,iBAAiB,CAAC,CAAC;EACxD,GAAG;AACH;EACA,EAAE,WAAW,GAAG;EAChB,IAAI,KAAK,EAAE,CAAC;EACZ,IAAI,MAAM,CAAC,GAAG,IAAI,CAAC;AACnB;EACA,IAAI,CAAC,CAAC,IAAI,GAAG;EACb,MAAM,UAAU,EAAE,KAAK;EACvB,MAAM,MAAM,EAAE,CAAC;EACf,MAAM,QAAQ,EAAE,CAAC;EACjB,MAAM,KAAK,EAAE,CAAC;EACd,MAAM,SAAS,EAAE,IAAI;EACrB,MAAM,QAAQ,EAAE,KAAK;EACrB,MAAM,UAAU,EAAE,KAAK;EACvB,MAAM,OAAO,EAAE,KAAK;EACpB,KAAK,CAAC;AACN;EACA,IAAI,CAAC,CAAC,SAAS,GAAG;EAClB,MAAM,UAAU,EAAE,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC;EAC1C,MAAM,SAAS,EAAE,CAAC,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC;EACxC,MAAM,QAAQ,EAAE,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC;EACtC,MAAM,aAAa,EAAE,CAAC,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC,CAAC;EAClD,MAAM,YAAY,EAAE,QAAQ,CAAC,MAAM;EACnC,QAAQ,IAAI,MAAM,CAAC,UAAU,GAAG,CAAC,CAAC,eAAe,IAAI,CAAC,CAAC,KAAK,EAAE,MAAM,EAAE;EACtE,UAAU,CAAC,CAAC,IAAI,EAAE,CAAC;EACnB,SAAS;EACT,OAAO,EAAE,GAAG,CAAC;EACb;EACA;EACA,MAAM,UAAU,EAAE,MAAM;EACxB,QAAQ,MAAM,QAAQ,GAAG,CAAC,CAAC,QAAQ,CAAC;EACpC,QAAQ,IAAI,QAAQ,IAAI,CAAC,CAAC,CAAC,cAAc,EAAE;EAC3C,UAAU,CAAC,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC;EACvC,UAAU,CAAC,CAAC,cAAc,GAAG,IAAI,CAAC;EAClC,SAAS;EACT,QAAQ,CAAC,CAAC,MAAM,EAAE,SAAS,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;EACjD,OAAO;EACP,KAAK,CAAC;EACN,GAAG;AACH;EACA;EACA;EACA;EACA;EACA,EAAE,IAAI,CAAC,SAAS,EAAE;EAClB,IAAI,MAAM,CAAC,GAAG,IAAI,CAAC;EACnB,IAAI,IAAI,MAAM,CAAC,UAAU,GAAG,CAAC,CAAC,eAAe,EAAE,OAAO;EACtD,IAAI,CAAC,CAAC,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;EAC7B,GAAG;AACH;EACA;EACA;EACA;EACA,EAAE,IAAI,GAAG;EACT;EACA,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE;EACrB,MAAM,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,SAAS,GAAG,EAAE,CAAC;EACvC,KAAK;EACL,IAAI,IAAI,CAAC,KAAK,EAAE,IAAI,EAAE,CAAC;EACvB,GAAG;AACH;EACA;EACA;EACA;EACA,EAAE,gBAAgB,CAAC,EAAE,EAAE;EACvB,IAAI,MAAM,CAAC,GAAG,IAAI,CAAC;EACnB,IAAI,IAAI,CAAC,EAAE,EAAE,OAAO;EACpB,IAAI,EAAE,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,CAAC,SAAS,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;EACpE,IAAI,EAAE,CAAC,gBAAgB,CAAC,WAAW,EAAE,CAAC,CAAC,SAAS,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;EACnE,IAAI,EAAE,CAAC,gBAAgB,CAAC,UAAU,EAAE,CAAC,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;EAC1D,IAAI,EAAE,CAAC,gBAAgB,CAAC,aAAa,EAAE,CAAC,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;EAC7D,GAAG;AACH;EACA;EACA;EACA;EACA,EAAE,kBAAkB,CAAC,EAAE,EAAE;EACzB,IAAI,MAAM,CAAC,GAAG,IAAI,CAAC;EACnB,IAAI,IAAI,CAAC,EAAE,EAAE,OAAO;EACpB,IAAI,EAAE,CAAC,mBAAmB,CAAC,YAAY,EAAE,CAAC,CAAC,SAAS,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;EACvE,IAAI,EAAE,CAAC,mBAAmB,CAAC,WAAW,EAAE,CAAC,CAAC,SAAS,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;EACtE,IAAI,EAAE,CAAC,mBAAmB,CAAC,UAAU,EAAE,CAAC,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;EAC7D,IAAI,EAAE,CAAC,mBAAmB,CAAC,aAAa,EAAE,CAAC,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;EAChE,GAAG;AACH;EACA,EAAE,iBAAiB,GAAG;EACtB,IAAI,MAAM,CAAC,GAAG,IAAI,CAAC;AACnB;EACA;EACA,IAAI,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,KAAK,CAAC;EAC1B,IAAI,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC,MAAM,CAAC;AAC5B;EACA,IAAI,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,CAAC,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;AAChE;EACA,IAAI,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;EACjC,IAAI,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;AAClC;EACA;EACA;EACA,IAAI,CAAC,CAAC,cAAc,GAAG,KAAK,CAAC;EAC7B,IAAI,CAAC,CAAC,SAAS,EAAE,gBAAgB,CAAC,YAAY,EAAE,CAAC,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;AACxE;EACA,IAAI,IAAI,CAAC,CAAC,UAAU,EAAE;EACtB,MAAM,CAAC,CAAC,UAAU,CAAC,gBAAgB,CAAC,eAAe,EAAE,CAAC,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC;EAChF,KAAK;EACL,GAAG;AACH;EACA,EAAE,oBAAoB,GAAG;EACzB,IAAI,MAAM,CAAC,GAAG,IAAI,CAAC;AACnB;EACA,IAAI,MAAM,CAAC,mBAAmB,CAAC,QAAQ,EAAE,CAAC,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;AACnE;EACA,IAAI,CAAC,CAAC,kBAAkB,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;EACnC,IAAI,CAAC,CAAC,kBAAkB,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;AACpC;EACA,IAAI,IAAI,CAAC,CAAC,cAAc,EAAE;EAC1B,MAAM,CAAC,CAAC,kBAAkB,CAAC,CAAC,CAAC,SAAS,EAAE,aAAa,CAAC,iBAAiB,CAAC,CAAC,CAAC;EAC1E,MAAM,CAAC,CAAC,cAAc,GAAG,KAAK,CAAC;EAC/B,KAAK;AACL;EACA,IAAI,CAAC,CAAC,SAAS,EAAE,mBAAmB,CAAC,YAAY,EAAE,CAAC,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;AAC3E;EACA,IAAI,IAAI,CAAC,CAAC,UAAU,EAAE;EACtB,MAAM,CAAC,CAAC,UAAU,CAAC,mBAAmB,CAAC,eAAe,EAAE,CAAC,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC;EACnF,KAAK;AACL;EACA,IAAI,CAAC,CAAC,SAAS,GAAG,IAAI,CAAC;EACvB,IAAI,CAAC,CAAC,UAAU,GAAG,IAAI,CAAC;EACxB,GAAG;AACH;EACA;EACA;EACA;EACA;EACA,EAAE,cAAc,CAAC,CAAC,EAAE;EACpB,IAAI,MAAM,CAAC,GAAG,IAAI,CAAC;EACnB,IAAI,MAAM,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC;AACxB;EACA,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;EAC7C,IAAI,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;EAC1B,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;AACnB;EACA,IAAI,CAAC,CAAC,MAAM,EAAE,SAAS,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;AAChD;EACA,IAAI,MAAM,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,qBAAqB,CAAC,CAAC;EAC/D,IAAI,MAAM,UAAU,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC;EAC7D,IAAI,MAAM,OAAO,GAAG,CAAC,CAAC,OAAO,EAAE,SAAS,KAAK,CAAC,CAAC;AAC/C;EACA,IAAI,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;EAC7B,IAAI,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;EACjC,IAAI,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;AAC3B;EACA,IAAI,IAAI,QAAQ,IAAI,UAAU,IAAI,OAAO,EAAE;EAC3C,MAAM,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;EAC7B,KAAK;EACL,GAAG;AACH;EACA;EACA;EACA;EACA;EACA;EACA,EAAE,gBAAgB,CAAC,KAAK,EAAE;EAC1B,IAAI,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC;EAC9D,GAAG;AACH;EACA;EACA;EACA;EACA;EACA,EAAE,aAAa,CAAC,CAAC,EAAE;EACnB,IAAI,MAAM,CAAC,GAAG,IAAI,CAAC;EACnB,IAAI,MAAM,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC;AACxB;EACA,IAAI,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,OAAO;AACjC;EACA,IAAI,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;EAC/C,IAAI,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC;AAC7C;EACA,IAAI,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;EACzB,MAAM,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,GAAG,IAAI,GAAG,MAAM,CAAC;EACtD,KAAK;AACL;EACA;EACA,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;EAC5C,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,OAAO;EAChC,MAAM,IAAI,IAAI,CAAC,SAAS,KAAK,IAAI,EAAE,OAAO;EAC1C,KAAK;AACL;EACA,IAAI,IAAI,CAAC,CAAC,UAAU,EAAE,CAAC,CAAC,cAAc,EAAE,CAAC;EACzC,IAAI,CAAC,CAAC,eAAe,EAAE,CAAC;AACxB;EACA,IAAI,MAAM,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC;EAC5B,IAAI,IAAI,CAAC,MAAM,EAAE,OAAO;AACxB;EACA;EACA,IAAI,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,EAAE;EACxB,MAAM,MAAM,aAAa,GAAG,CAAC,CAAC,gBAAgB,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;EACrE,MAAM,MAAM,CAAC,KAAK,CAAC,SAAS,GAAG,CAAC,cAAc,EAAE,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;EACtE,MAAM,OAAO;EACb,KAAK;AACL;EACA;EACA,IAAI,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,EAAE;EACxB,MAAM,MAAM,CAAC,KAAK,CAAC,SAAS,GAAG,CAAC,cAAc,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;EAClE,KAAK;EACL,GAAG;AACH;EACA;EACA;EACA;EACA,EAAE,YAAY,GAAG;EACjB,IAAI,MAAM,CAAC,GAAG,IAAI,CAAC;EACnB,IAAI,MAAM,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC;AACxB;EACA,IAAI,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,OAAO;EACjC,IAAI,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;AAC5B;EACA,IAAI,MAAM,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC;EAC5B,IAAI,IAAI,CAAC,MAAM,EAAE,OAAO;AACxB;EACA;EACA,IAAI,IAAI,IAAI,CAAC,KAAK,KAAK,CAAC,EAAE;EAC1B,MAAM,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;EAC5B,MAAM,OAAO;EACb,KAAK;AACL;EACA,IAAI,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;AAC1C;EACA;EACA,IAAI,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,EAAE;EACxB,MAAM,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;EACrB,MAAM,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;EAC5B,MAAM,MAAM,CAAC,KAAK,CAAC,SAAS,GAAG,EAAE,CAAC;EAClC,MAAM,OAAO;EACb,KAAK;AACL;EACA;EACA,IAAI,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,cAAc,EAAE;EACvC,MAAM,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;EACrB,MAAM,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;EAC5B,MAAM,CAAC,CAAC,IAAI,EAAE,CAAC;EACf,MAAM,OAAO;EACb,KAAK;AACL;EACA;EACA,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;EACnB,IAAI,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;EAC1B,IAAI,MAAM,CAAC,KAAK,CAAC,SAAS,GAAG,EAAE,CAAC;EAChC,GAAG;AACH;EACA;EACA;EACA;EACA;EACA,EAAE,mBAAmB,CAAC,CAAC,EAAE;EACzB,IAAI,IAAI,CAAC,CAAC,MAAM,KAAK,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC,YAAY,KAAK,WAAW,EAAE;EACpE,MAAM,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;EACpD,KAAK;EACL,GAAG;EACH,CAAC;AACD;EACA,MAAM,kBAAkB,SAAS,WAAW,CAAC;EAC7C,EAAE,WAAW,GAAG;EAChB,IAAI,KAAK,EAAE,CAAC;EACZ,GAAG;EACH,CAAC;AACD;EACA,MAAM,iBAAiB,SAAS,WAAW,CAAC;EAC5C,EAAE,WAAW,GAAG;EAChB,IAAI,KAAK,EAAE,CAAC;EACZ,GAAG;EACH,CAAC;AACD;EACA,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,cAAc,CAAC,EAAE;EACzC,EAAE,cAAc,CAAC,MAAM,CAAC,cAAc,EAAE,WAAW,CAAC,CAAC;EACrD,CAAC;EACD,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,sBAAsB,CAAC,EAAE;EACjD,EAAE,cAAc,CAAC,MAAM,CAAC,sBAAsB,EAAE,kBAAkB,CAAC,CAAC;EACpE,CAAC;EACD,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,qBAAqB,CAAC,EAAE;EAChD,EAAE,cAAc,CAAC,MAAM,CAAC,qBAAqB,EAAE,iBAAiB,CAAC,CAAC;EAClE;;;;;;;;;;"}